# UNIX Process

## 引言

进程是Unix系统最基本的抽象之一（另外一个是文件），按照操作系统中的解释，进程是程序执行的一个实例，你可以把它当作是充分描述程序执行状态的数据结构的集合。从内核来看，进程的作用就是担当系统资源(CPU时间片或内存)分配的实体。

进程可以创建子进程，因此进程之间具备继承关系。子进程和父进程有共享的资源（共享的代码段），也有私有的资源（独立的内存空间）。子进程从创建系统的系统调用后的代码开始执行。

在早期，Unix上非常流行多进程架构的软件，然而随着软件功能越来越复杂，进程之间需要更多的数据共享，然而进程之间的内存空间是相互隔离的。因此线程的概念提出了，线程是一种比进程更加轻量执行单元，属于同一个进程的线程之间可以共享内存，这样就能充分的利用多核CPU的能力。

站在Linux内核的角度，它并不认为有线程的存在。

## 进程描述符

进程描述符(process descriptor)记录进程运行状态的一种数据结构，在Linux中被定义为task_struct结构体，它的字段包含了所有的信息，注意进程描述符和进程ID不是一个概念。task_struct中定义的与进程关联的资源主要有:

1. 进程的基本信息
2. 指向内存区描述符的指针
3. 与进程相关的tty
4. 当前目录
5. 指向文件描述符的指针
6. 所接受的信号.

### 进程状态

进程描述符中的state字段描述了进程当前所处的状态。它由一组标志组成，每个标志描述一个可能的状态，在当前了Linux版本，这些状态之间是互斥的，说白了就是状态机模型。下面是进程可能的状态：

    TASK_RUNNING
    要么准备执行，要么已经在CPU上执行

    TASK_INTERRUPTIBLE
    进程被挂起（睡眠），直到某个条件变为真。

    TASK_UNINTERRUPTIBLE
    与TASK_INTERRUPTIBLE类似，但是不能被信号中断。

    TASK_STOPPED
    进程的执行被暂停。当进程接收到SIGSTOP，SIGSTP、SIGTTIN或SIGTTOU的信号后，会进入暂停状态。

    TASK_TRACED
    执行的进程由debugger程序暂停。当一个进程被另外一个进程监控时。例如执行ptrace()系统调用监控一个测试程序时。

    EXIT_ZOMBIE

    EXIT_DEAD

## 进程模型

## Notes

进程中的所有线程都会收到信号。
